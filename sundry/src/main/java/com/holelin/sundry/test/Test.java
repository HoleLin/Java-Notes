package com.holelin.sundry.test;

import cn.hutool.json.JSONArray;
import cn.hutool.json.JSONUtil;
import com.google.common.collect.Sets;

import java.util.List;
import java.util.Set;

public class Test {

    public static final Set<Long> sets = Sets.newConcurrentHashSet();

    @org.junit.Test
    public void test() throws InterruptedException {
        SnowFlake snowFlake = new SnowFlake(2, 3);
        for (int i = 0; i < 10; i++) {
            Thread t1 = new Thread(() -> {
                for (int j = 0; j < 1000000; j++) {
                    sets.add(snowFlake.nextId());
                }
            });
            t1.start();
            t1.join();
        }
        System.out.println(sets.size());
    }

    @org.junit.Test
    public void test1() {
        String all = new StringBuilder().append("[\n").append("  \"2110270820159812555\",\n").append("  \"2110270823399813076\",\n").append("  \"2110270830389813868\",\n").append("  \"2110270834359814387\",\n").append("  \"2110270846419815331\",\n").append("  \"2110270849149815613\",\n").append("  \"2110270857279816985\",\n").append("  \"2110270910239818217\",\n").append("  \"2110270915349818856\",\n").append("  \"2110270937009821693\",\n").append("  \"2110270941539822294\",\n").append("  \"2110270945279822810\",\n").append("  \"2110270954579824176\",\n").append("  \"2110271014079826955\",\n").append("  \"2110271016289827172\",\n").append("  \"2110271026069828582\",\n").append("  \"2110271026189828669\",\n").append("  \"2110271034399829735\",\n").append("  \"2110271035509829975\",\n").append("  \"2110271037159830263\",\n").append("  \"211027104214371\",\n").append("  \"2110271051031316\",\n").append("  \"2110271054511731\",\n").append("  \"2110271055281895\",\n").append("  \"2110271103342951\",\n").append("  \"2110271103533013\",\n").append("  \"21102711042431105\",\n").append("  \"2110271109333784\",\n").append("  \"2110271111094018\",\n").append("  \"2110271114154574\",\n").append("  \"2110271126356149\",\n").append("  \"2110271131267062\",\n").append("  \"2110271133077144\",\n").append("  \"2110271136387770\",\n").append("  \"2110271143318652\",\n").append("  \"2110271146309076\",\n").append("  \"2110271149039445\",\n").append("  \"2110271154599713\",\n").append("  \"21102711554598101\",\n").append("  \"21102712040011028\",\n").append("  \"21102712055911383\",\n").append("  \"21102712113212252\",\n").append("  \"21102712211913492\",\n").append("  \"21102712233213827\",\n").append("  \"21102712245214079\",\n").append("  \"21102712413316649\",\n").append("  \"21102712484617450\",\n").append("  \"21102712584118914\",\n").append("  \"21102712592819026\",\n").append("  \"21102713010719227\",\n").append("  \"211027131210206106\",\n").append("  \"21102713192521872\",\n").append("  \"21102713320823515\",\n").append("  \"21102713325323795\",\n").append("  \"2110271334372104\",\n").append("  \"211027133507351\",\n").append("  \"211027133714627\",\n").append("  \"2110271343241362\",\n").append("  \"21102713452817108\",\n").append("  \"2110271356043093\",\n").append("  \"211027140212799\",\n").append("  \"211027140408851\",\n").append("  \"211027140434923\",\n").append("  \"2110271406471239\",\n").append("  \"2110271408211451\",\n").append("  \"2110271408331527\",\n").append("  \"2110271410081775\",\n").append("  \"2110271410181896\",\n").append("  \"2110271412402142\",\n").append("  \"2110271413452282\",\n").append("  \"2110271414152369\",\n").append("  \"2110271420402890\",\n").append("  \"2110271420502953\",\n").append("  \"2110271421383111\",\n").append("  \"2110271424293245\",\n").append("  \"2110271425133436\",\n").append("  \"21102714262135107\",\n").append("  \"2110271427093643\",\n").append("  \"2110271428183773\",\n").append("  \"2110271428393880\",\n").append("  \"2110271432224038\",\n").append("  \"2110271434044291\",\n").append("  \"2110271435124581\",\n").append("  \"2110271439554712\",\n").append("  \"2110271440204827\",\n").append("  \"2110271440364961\",\n").append("  \"21102714410750103\",\n").append("  \"2110271443075247\",\n").append("  \"2110271444115478\",\n").append("  \"2110271444385598\",\n").append("  \"2110271451416127\",\n").append("  \"2110271453196242\",\n").append("  \"2110271453406349\",\n").append("  \"2110271454106565\",\n").append("  \"2110271454206668\",\n").append("  \"21102714544467108\",\n").append("  \"2110271459367042\",\n").append("  \"2110271505087517\",\n").append("  \"2110271507097744\",\n").append("  \"2110271508307849\",\n").append("  \"2110271508437995\",\n").append("  \"2110271512228446\",\n").append("  \"2110271516008978\",\n").append("  \"21102715164090104\",\n").append("  \"21102715225210158\",\n").append("  \"21102715264910488\",\n").append("  \"21102715360911696\",\n").append("  \"21102715483313059\",\n").append("  \"21102715573414213\",\n").append("  \"21102715591814548\",\n").append("  \"21102716235117468\",\n").append("  \"21102716355818215\",\n").append("  \"21102720183726686\",\n").append("  \"21102804295734539\",\n").append("  \"21102805125634894\",\n").append("  \"21102807450936183\",\n").append("  \"21102807475836291\",\n").append("  \"21102807520736379\"]\n").toString();
        String temp = new StringBuilder().append("[\n").append("  \"2110270820159812555\",\n").append("  \"2110270823399813076\",\n").append("  \"2110270830389813868\",\n").append("  \"2110270834359814387\",\n").append("  \"2110270857279816985\",\n").append("  \"2110270941539822294\",\n").append("  \"2110271026189828669\",\n").append("  \"2110271035509829975\",\n").append("  \"2110270937009821693\",\n").append("  \"2110270954579824176\",\n").append("  \"2110271131267062\",\n").append("  \"2110271034399829735\",\n").append("  \"21102712484617450\",\n").append("  \"2110271111094018\",\n").append("  \"211027133714627\",\n").append("  \"2110271026069828582\",\n").append("  \"21102712113212252\",\n").append("  \"2110271410081775\",\n").append("  \"2110271414152369\",\n").append("  \"2110271420502953\",\n").append("  \"2110271420402890\",\n").append("  \"2110271055281895\",\n").append("  \"21102713010719227\",\n").append("  \"2110271425133436\",\n").append("  \"2110271427093643\",\n").append("  \"2110271428183773\",\n").append("  \"211027131210206106\",\n").append("  \"2110271434044291\",\n").append("  \"2110271435124581\",\n").append("  \"2110271343241362\",\n").append("  \"21102713452817108\",\n").append("  \"2110271356043093\",\n").append("  \"2110271444115478\",\n").append("  \"21102712245214079\",\n").append("  \"2110271453196242\",\n").append("  \"2110271453406349\",\n").append("  \"2110271454206668\",\n").append("  \"21102714544467108\",\n").append("  \"2110271432224038\",\n").append("  \"2110271505087517\",\n").append("  \"21102715164090104\",\n").append("  \"21102715225210158\",\n").append("  \"21102715264910488\",\n").append("  \"2110271459367042\",\n").append("  \"2110271439554712\",\n").append("  \"211027104214371\",\n").append("  \"2110271051031316\",\n").append("  \"2110271054511731\",\n").append("  \"2110271103342951\",\n").append("  \"2110271103533013\",\n").append("  \"21102711042431105\",\n").append("  \"2110271109333784\",\n").append("  \"2110271114154574\",\n").append("  \"2110271126356149\",\n").append("  \"2110271133077144\",\n").append("  \"2110271136387770\",\n").append("  \"2110271143318652\",\n").append("  \"2110271146309076\",\n").append("  \"2110271149039445\",\n").append("  \"2110271154599713\",\n").append("  \"21102711554598101\",\n").append("  \"21102712040011028\",\n").append("  \"21102712055911383\",\n").append("  \"21102712211913492\",\n").append("  \"21102712233213827\",\n").append("  \"21102712584118914\",\n").append("  \"21102712592819026\",\n").append("  \"21102713192521872\",\n").append("  \"21102713320823515\",\n").append("  \"21102713325323795\",\n").append("  \"2110271334372104\",\n").append("  \"211027133507351\",\n").append("  \"211027140212799\",\n").append("  \"211027140408851\",\n").append("  \"211027140434923\",\n").append("  \"2110271406471239\",\n").append("  \"2110271408211451\",\n").append("  \"2110271408331527\",\n").append("  \"2110271410181896\",\n").append("  \"2110271412402142\",\n").append("  \"2110271413452282\",\n").append("  \"2110271421383111\",\n").append("  \"2110271424293245\",\n").append("  \"21102714262135107\",\n").append("  \"2110271428393880\",\n").append("  \"2110271440204827\",\n").append("  \"2110271440364961\",\n").append("  \"21102714410750103\",\n").append("  \"2110271443075247\",\n").append("  \"2110271444385598\",\n").append("  \"2110271451416127\",\n").append("  \"21102712413316649\",\n").append("  \"2110271454106565\",\n").append("  \"2110271507097744\",\n").append("  \"2110271508307849\",\n").append("  \"2110271508437995\",\n").append("  \"2110271512228446\",\n").append("  \"2110271516008978\",\n").append("  \"21102715360911696\",\n").append("  \"21102715483313059\",\n").append("  \"21102715573414213\",\n").append("  \"21102715591814548\",\n").append("  \"21102716235117468\",\n").append("  \"21102716355818215\",\n").append("  \"21102720183726686\",\n").append("  \"21102804295734539\",\n").append("  \"21102805125634894\",\n").append("  \"21102807450936183\",\n").append("  \"21102807475836291\",\n").append("  \"21102807520736379\"]\n").toString();

        JSONArray objects = JSONUtil.parseArray(all);
        JSONArray objects1 = JSONUtil.parseArray(temp);
        objects.forEach(it -> {
                    if (!objects1.contains(it)) {
                        System.out.println(it.toString());
                    }
                }
        );

    }
}
